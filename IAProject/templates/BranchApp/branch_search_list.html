{% extends 'layout.html' %}

{% block title %}
    <title>Show Branches</title>
{% endblock %}

{% block search %}
    <div style="padding-top: 2%; margin-right: 20px;" class="form-inline my-2 my-lg-0">
        <form action="{% url 'search_branch' %}" class="form-inline my-2 my-lg-0">
            <input type="text" name="branch_name" class="form-control mr-sm-2" autocomplete="off">
            <input type="submit" value="Search Branch." class="btn btn-success my-2 my-sm-0">
        </form>
    </div>         
{% endblock %}

{% block content %}
    <div class="container jumbotron">
    <h1 style="text-align: center;">Search Branches</h1>
    <br><br>
        {% if branch %}
            <table class="table table-striped table-hover">
                <tr class="thead-dark">
                    <th>Branch ID</th>
                    <th>Branch Name</th>
                    <th>Branch Intake</th>
                    <th>Branch Seat Fees</th>
                    <th>Branch Exam Fees</th>   
                    <th>Update</th>
                    <th>Delete</th>
                </tr>
                    <tr>
                        <td>{{branch.id}}</td>
                        <td>{{branch.name}}</td>
                        <td>{{branch.intake}}</td>
                        <td>{{branch.college_fees}}</td>
                        <td>{{branch.exam_fees}}</td>
                        <td><a href="{% url 'update_branch' branch.id %}"><button class="btn btn-warning">Update</button></a></td>
                        <td><a href="{% url 'delete_branch' branch.id %}"><button class="btn btn-danger">Delete</button></a></td>
                    </tr>
            </table>
            <!-- <br> -->
            <div style="text-align: center;">
                <a href="{% url 'retrive_branch' %}">
                    <button class="btn btn-primary">
                        All Branches
                    </button>
                </a>
            </div>
        {% else %}
            <h5>No such branch found with name {{branch_name}}...</h5>
            <div style="text-align: center;">
                <a href="{% url 'retrive_branch' %}">
                    <button class="btn btn-primary">
                        All Branches
                    </button>
                </a>
            </div>
        {% endif %}
        
        <br><hr>
        <h1 style="text-align: center;">Professors in this Branch</h1>
        {% if profs_list %}
            <table class="table table-striped table-hover">
                <tr class="thead-dark">
                    <th>Professor ID</th>
                    <th>Professor Name</th>
                    <th>Professor Salary</th>
                    <!-- <th>Update</th> -->
                    <!-- <th>Delete</th> -->
                </tr>
                {% for prof in profs_list %}
                    <tr>
                        <td>{{prof.id}}</td>
                        <td>{{prof.name}}</td>
                        <td>{{prof.salary}} LPA</td>
                        <!-- <td><a href="{% url 'update_prof' prof.id %}"><button class="btn btn-warning">Update</button></a></td> -->
                        <!-- <td><a href="{% url 'delete_prof' prof.id %}"><button class="btn btn-danger">Delete</button></a></td> -->
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <h5>No professors in this branch yet...</h5>
            <div style="text-align: center;">   
                <a href="{% url 'create_prof' %}">
                    <button class="btn btn-primary">
                        Add Professor
                    </button>
                </a>
            </div>
        {% endif %}

        <br><hr>
        <h1 style="text-align: center;">Students in this Branch</h1>
        {% if studs_list %}
            <table class="table table-striped table-hover">
                <tr class="thead-dark">
                    <th>Roll No</th>
                    <th>Name</th>
                    <th>Marks</th>
                    <th>Branch</th>
                    <!-- <th>Update</th> -->
                    <!-- <th>Delete</th> -->
                </tr>
                {% for stud in studs_list %}
                    <tr>
                        <td>{{stud.rn}}</td>
                        <td>{{stud.name}}</td>
                        <td>{{stud.marks}}</td>
                        <td>{{stud.branch}}</td>
                        <!-- <td><a href="{% url 'update_stud' stud.id %}"><button class="btn btn-warning">Update</button></a></td> -->
                        <!-- <td><a href="{% url 'delete_stud' stud.id %}"><button class="btn btn-danger">Delete</button></a></td> -->
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <h5>No students in this branch yet...</h5>
            <div style="text-align: center;">
                <a href="{% url 'create_stud' %}">
                    <button class="btn btn-primary">
                        Add Student
                    </button>
                </a>
            </div>
        {% endif %}
    </div>
{% endblock %}
        